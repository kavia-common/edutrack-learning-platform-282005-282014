{"is_source_file": true, "format": "JavaScript", "description": "This file provides a client-side inbox service for managing onboarding documents, including functions for listing, submitting, updating, and generating printable HTML snapshots of documents stored in localStorage. It also includes event subscription for updates across tabs.", "external_files": ["window.localStorage", "window.dispatchEvent", "CustomEvent", "URL.createObjectURL"], "external_methods": ["JSON.parse", "JSON.stringify", "Date.now", "Date.prototype.toISOString", "window.addEventListener", "window.removeEventListener", "window.dispatchEvent", "window.localStorage.getItem", "window.localStorage.setItem", "URL.createObjectURL"], "published": ["listInbox", "submitDocument", "getInboxById", "submitJson", "updateStatus", "ensurePrintableHtml", "subscribeInbox"], "classes": [], "methods": [{"name": "safeParse", "description": "Safely parses JSON string; returns fallback if parsing fails or result is not an array."}, {"name": "emitUpdate", "description": "Dispatches a custom event to notify other parts of the app about inbox updates."}, {"name": "normalizeStatus", "description": "Normalizes status strings to predefined values."}, {"name": "listInbox", "description": "Returns all stored inbox documents sorted by creation date, newest first."}, {"name": "submitDocument", "description": "Stores a new document with optional Blob or data URL, generates an ID, and updates localStorage."}, {"name": "getInboxById", "description": "Retrieves a specific inbox document by its ID."}, {"name": "submitJson", "description": "Stores a JSON-only inbox entry with a generated printable HTML snapshot."}, {"name": "updateStatus", "description": "Updates the status of an existing inbox item."}, {"name": "ensurePrintableHtml", "description": "Generates printable HTML for an item if absent, based on its JSON payload."}, {"name": "buildPrintableHtml", "description": "Creates an HTML string for printing, including styles and JSON payload."}, {"name": "escapeHtml", "description": "Escapes HTML special characters in a string for safe embedding."}, {"name": "subscribeInbox", "description": "Subscribes to inbox updates via storage events and custom events; returns an unsubscribe function."}], "calls": ["window.dispatchEvent", "JSON.parse", "JSON.stringify", "URL.createObjectURL", "window.localStorage.getItem", "window.localStorage.setItem", "window.addEventListener", "window.removeEventListener", "new CustomEvent", "new Date", "buildPrintableHtml", "escapeHtml"], "search-terms": ["client-side inbox", "localStorage persistence", "inbox document management", "printable HTML snapshot", "inbox update event", "submit JSON entry", "update document status"], "state": 2, "file_id": 35, "knowledge_revision": 284, "git_revision": "2c723f044eb4849eaea41bbf091a942bb6868f55", "revision_history": [{"156": ""}, {"181": "d53a9f6eb8b28e1dc92d94e2067dcc0b22e767a3"}, {"186": "591276e6179d453d6c3b08676514043fdc65ab0d"}, {"284": "2c723f044eb4849eaea41bbf091a942bb6868f55"}], "ctags": [], "filename": "frontend_lms/src/services/inbox.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/edutrack-learning-platform-282005-282014.git:kavia-main"}