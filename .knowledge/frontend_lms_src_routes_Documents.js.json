{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This file defines a React component for managing onboarding documents, including rendering PDF previews, handling document acknowledgment states, and submitting completed documents to an external inbox and API. It includes utility functions for PDF generation from HTML snippets, localStorage data snapshots, and document build logic.", "external_files": ["../components/documents/DocumentList", "../store/documentsStore", "../utils/documentsStatus", "../utils/api", "../utils/adminInbox"], "external_methods": ["loadAckState", "saveAckState", "getDocumentsStatus", "postAcknowledgements", "appendInboxItem"], "published": ["verifyPdfDataUrl", "default"], "classes": [], "methods": [{"name": "ensurePdfLibs()", "description": "Dynamically imports html2canvas and jsPDF libraries from CDN for client-side PDF generation, returns them if available.", "scope": "", "scopeKind": ""}, {"name": "normalizePdfDataUrl(maybe)", "description": "Ensures the generated PDF data URL is valid and not truncated, checking for proper prefix and minimum size.", "scope": "", "scopeKind": ""}, {"name": "renderPdfDataUrlFromHtml(html, fileBaseName = 'document')", "description": "Renders HTML string into a PDF and returns it as a base64 data URL, with fallbacks and size validation.", "scope": "", "scopeKind": ""}, {"name": "buildDocHtmlSnapshots()", "description": "Creates minimal HTML representations of various onboarding documents from localStorage for PDF rendering.", "scope": "", "scopeKind": ""}, {"name": "verifyPdfDataUrl(sample)", "description": "Verifies a sample PDF data URL for correctness, logging diagnostics to console.", "scope": "", "scopeKind": ""}, {"name": "Documents()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["loadAckState", "saveAckState", "getDocumentsStatus", "appendInboxItem", "postAcknowledgements", "ensurePdfLibs", "normalizePdfDataUrl", "renderPdfDataUrlFromHtml", "buildDocHtmlSnapshots"], "search-terms": ["DocumentList", "loadAckState", "saveAckState", "getDocumentsStatus", "postAcknowledgements", "appendInboxItem", "renderPdfDataUrlFromHtml", "buildDocHtmlSnapshots", "PDF generation", "Acknowledgement", "Onboarding", "React component"], "state": 2, "file_id": 25, "knowledge_revision": 129, "git_revision": "e684db916628a2d3fc2732d692c02dc4ad23ca97", "revision_history": [{"61": "e684db916628a2d3fc2732d692c02dc4ad23ca97"}, {"129": "e684db916628a2d3fc2732d692c02dc4ad23ca97"}], "ctags": [{"_type": "tag", "name": "Documents", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^export default function Documents() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "acceptedAt", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          acceptedAt: state?.code_of_conduct?.acceptedAt || data.savedAt || nowIso,$/", "language": "JavaScript", "kind": "property", "scope": "Documents.codeOfConduct", "scopeKind": "class"}, {"_type": "tag", "name": "acceptedAt", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          acceptedAt: state?.internship_letter?.acceptedAt || data.savedAt || nowIso,$/", "language": "JavaScript", "kind": "property", "scope": "Documents.offerLetter", "scopeKind": "class"}, {"_type": "tag", "name": "acceptedAt", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          acceptedAt: state?.nda?.acceptedAt || data.savedAt || nowIso,$/", "language": "JavaScript", "kind": "property", "scope": "Documents.nda", "scopeKind": "class"}, {"_type": "tag", "name": "buildDocHtmlSnapshots", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^function buildDocHtmlSnapshots() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "canContinue", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^            title={canContinue ? 'Continue' : 'Finish all documents to enable'}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "codeOfConduct", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^        codeOfConduct = {$/", "language": "JavaScript", "kind": "class", "scope": "Documents", "scopeKind": "class"}, {"_type": "tag", "name": "codeOfConduct", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^      codeOfConduct: docStatus.codeOfConduct === 'Completed',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.inboxItem", "scopeKind": "class"}, {"_type": "tag", "name": "consultantDate", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          consultantDate: data.consultantDate || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.nda", "scopeKind": "class"}, {"_type": "tag", "name": "consultantName", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          consultantName: data.consultantName || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.nda", "scopeKind": "class"}, {"_type": "tag", "name": "consultantTitle", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          consultantTitle: data.consultantTitle || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.nda", "scopeKind": "class"}, {"_type": "tag", "name": "documents", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^      documents: [state.code_of_conduct, state.nda, state.internship_letter].map((d) => ({$/", "language": "JavaScript", "kind": "property", "scope": "Documents.payload", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^      email: submittedBy || 'anonymous',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.inboxItem", "scopeKind": "class"}, {"_type": "tag", "name": "employeeName", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          employeeName: data.name || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.codeOfConduct", "scopeKind": "class"}, {"_type": "tag", "name": "ensurePdfLibs", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^async function ensurePdfLibs() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handleSubmit", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^            onClick={handleSubmit}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "inboxItem", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^    const inboxItem = {$/", "language": "JavaScript", "kind": "class", "scope": "Documents", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          <DocumentList items={items} \\/>$/", "language": "JavaScript", "kind": "field", "scope": "AnonymousClassb6fa23340201", "scopeKind": "class"}, {"_type": "tag", "name": "nda", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^        nda = {$/", "language": "JavaScript", "kind": "class", "scope": "Documents", "scopeKind": "class"}, {"_type": "tag", "name": "nda", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^      nda: docStatus.nda === 'Completed',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.inboxItem", "scopeKind": "class"}, {"_type": "tag", "name": "normalizePdfDataUrl", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^function normalizePdfDataUrl(maybe) {$/", "language": "JavaScript", "kind": "function", "signature": "(maybe)"}, {"_type": "tag", "name": "offerLetter", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^        offerLetter = {$/", "language": "JavaScript", "kind": "class", "scope": "Documents", "scopeKind": "class"}, {"_type": "tag", "name": "offerLetter", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^      offerLetter: docStatus.offerLetter === 'Completed',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.inboxItem", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^    const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "Documents", "scopeKind": "class"}, {"_type": "tag", "name": "renderPdfDataUrlFromHtml", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^async function renderPdfDataUrlFromHtml(html, fileBaseName = 'document') {$/", "language": "JavaScript", "kind": "function", "signature": "(html, fileBaseName = 'document')"}, {"_type": "tag", "name": "signatureFileName", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          signatureFileName: data.sigFileName || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.nda", "scopeKind": "class"}, {"_type": "tag", "name": "signatureFileName", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          signatureFileName: data.sigFileName || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.offerLetter", "scopeKind": "class"}, {"_type": "tag", "name": "signatureFileName", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          signatureFileName: data.signatureFileName || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.codeOfConduct", "scopeKind": "class"}, {"_type": "tag", "name": "signatureImage", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          signatureImage: data.sigDataUrl || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.nda", "scopeKind": "class"}, {"_type": "tag", "name": "signatureImage", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          signatureImage: data.sigDataUrl || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.offerLetter", "scopeKind": "class"}, {"_type": "tag", "name": "signatureImage", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          signatureImage: data.signatureFileDataUrl || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.codeOfConduct", "scopeKind": "class"}, {"_type": "tag", "name": "signatureName", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          signatureName: state?.code_of_conduct?.signatureName || data.name || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.codeOfConduct", "scopeKind": "class"}, {"_type": "tag", "name": "signatureName", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          signatureName: state?.internship_letter?.signatureName || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.offerLetter", "scopeKind": "class"}, {"_type": "tag", "name": "signatureName", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^          signatureName: state?.nda?.signatureName || data.consultantName || '',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.nda", "scopeKind": "class"}, {"_type": "tag", "name": "submittedAt", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^      submittedAt: new Date().toLocaleString(),$/", "language": "JavaScript", "kind": "property", "scope": "Documents.inboxItem", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^      userId: 'local-session',$/", "language": "JavaScript", "kind": "property", "scope": "Documents.payload", "scopeKind": "class"}, {"_type": "tag", "name": "verifyPdfDataUrl", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/routes/Documents.js", "pattern": "/^export function verifyPdfDataUrl(sample) {$/", "language": "JavaScript", "kind": "function", "signature": "(sample)"}], "hash": "5fc3b38eb7d62f85ad709da4d604cea9", "format-version": 4, "code-base-name": "frontend_lms", "filename": "frontend_lms/src/routes/Documents.js", "fields": [{"name": "acceptedAt: state?.code_of_conduct?.acceptedAt || data.savedAt || nowIso,", "scope": "Documents.codeOfConduct", "scopeKind": "class", "description": "unavailable"}, {"name": "acceptedAt: state?.internship_letter?.acceptedAt || data.savedAt || nowIso,", "scope": "Documents.offerLetter", "scopeKind": "class", "description": "unavailable"}, {"name": "acceptedAt: state?.nda?.acceptedAt || data.savedAt || nowIso,", "scope": "Documents.nda", "scopeKind": "class", "description": "unavailable"}, {"name": "title={canContinue ? 'Continue' : 'Finish all documents to enable'}", "scope": "title", "scopeKind": "class", "description": "unavailable"}, {"name": "codeOfConduct: docStatus.codeOfConduct === 'Completed',", "scope": "Documents.inboxItem", "scopeKind": "class", "description": "unavailable"}, {"name": "consultantDate: data.consultantDate || '',", "scope": "Documents.nda", "scopeKind": "class", "description": "unavailable"}, {"name": "consultantName: data.consultantName || '',", "scope": "Documents.nda", "scopeKind": "class", "description": "unavailable"}, {"name": "consultantTitle: data.consultantTitle || '',", "scope": "Documents.nda", "scopeKind": "class", "description": "unavailable"}, {"name": "documents: [state.code_of_conduct, state.nda, state.internship_letter].map((d) => ({", "scope": "Documents.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "email: submittedBy || 'anonymous',", "scope": "Documents.inboxItem", "scopeKind": "class", "description": "unavailable"}, {"name": "employeeName: data.name || '',", "scope": "Documents.codeOfConduct", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={handleSubmit}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "<DocumentList items={items} \\/>", "scope": "AnonymousClassb6fa23340201", "scopeKind": "class", "description": "unavailable"}, {"name": "nda: docStatus.nda === 'Completed',", "scope": "Documents.inboxItem", "scopeKind": "class", "description": "unavailable"}, {"name": "offerLetter: docStatus.offerLetter === 'Completed',", "scope": "Documents.inboxItem", "scopeKind": "class", "description": "unavailable"}, {"name": "signatureFileName: data.sigFileName || '',", "scope": "Documents.nda", "scopeKind": "class", "description": "unavailable"}, {"name": "signatureFileName: data.signatureFileName || '',", "scope": "Documents.codeOfConduct", "scopeKind": "class", "description": "unavailable"}, {"name": "signatureImage: data.sigDataUrl || '',", "scope": "Documents.nda", "scopeKind": "class", "description": "unavailable"}, {"name": "signatureImage: data.signatureFileDataUrl || '',", "scope": "Documents.codeOfConduct", "scopeKind": "class", "description": "unavailable"}, {"name": "signatureName: state?.code_of_conduct?.signatureName || data.name || '',", "scope": "Documents.codeOfConduct", "scopeKind": "class", "description": "unavailable"}, {"name": "signatureName: state?.internship_letter?.signatureName || '',", "scope": "Documents.offerLetter", "scopeKind": "class", "description": "unavailable"}, {"name": "signatureName: state?.nda?.signatureName || data.consultantName || '',", "scope": "Documents.nda", "scopeKind": "class", "description": "unavailable"}, {"name": "submittedAt: new Date().toLocaleString(),", "scope": "Documents.inboxItem", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: 'local-session',", "scope": "Documents.payload", "scopeKind": "class", "description": "unavailable"}]}