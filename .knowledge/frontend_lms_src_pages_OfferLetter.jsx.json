{"is_source_file": true, "format": "JavaScript/JSX", "description": "This file defines a React component `OfferLetter` responsible for rendering an internship offer letter page with functionalities such as uploading a signature image, generating a PDF version of the offer letter, and submitting the offer. It includes local storage management, image validation, PDF export via dynamically imported libraries, and layout/styling consistent with a React web application.", "external_files": ["../utils/documentsStatus", "../components/ui/Toast", "../utils/inboxUpdate"], "external_methods": ["setDocumentCompleted", "useToast", "upsertInboxPdfForUser"], "published": ["OfferLetter"], "classes": [], "methods": [{"name": "loadLocal()", "description": "Loads signature data from local storage, returning the filename and data URL.", "scope": "", "scopeKind": ""}, {"name": "saveLocal(state)", "description": "Saves signature data (file name and data URL) to local storage.", "scope": "", "scopeKind": ""}, {"name": "handleFileChange", "description": "Handles the file input change event, validating and reading the signature image."}, {"name": "handleSubmit()", "description": "Validates presence of signature, saves the data locally, marks the document as completed, and navigates to the documents page.", "scope": "", "scopeKind": ""}, {"name": "ensurePdfLibs()", "description": "Lazily imports html2canvas and jsPDF libraries from CDN to support PDF generation.", "scope": "", "scopeKind": ""}, {"name": "handleExportPdf()", "description": "Generates a PDF of the offer letter content using html2canvas and jsPDF, with pagination if needed, and uploads the PDF to the admin inbox.", "scope": "", "scopeKind": ""}], "calls": ["useNavigate", "setDocumentCompleted", "push", "upsertInboxPdfForUser", "URL.revokeObjectURL", "URL.createObjectURL", "FileReader", "window.html2canvas", "window.jspdf", "import"], "search-terms": ["OfferLetter", "signature upload", "PDF export", "react component", "local storage signature", "generate offer letter PDF", "signature validation", "signature image preview", "offer letter layout"], "state": 2, "file_id": 68, "knowledge_revision": 270, "git_revision": "fc96e5f98ad94fdcea96258357d4f29d8004640e", "ctags": [{"_type": "tag", "name": "OfferLetter", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^const OfferLetter = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^const STORAGE_KEY = \"offer_letter_signature_v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "dataUrl", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^        const dataUrl = String(reader.result || \"\");$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ensurePdfLibs", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  async function ensurePdfLibs() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "exportRef", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const exportRef = useRef(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "file", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^    const file = e.target.files?.[0];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleExportPdf", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^              onClick={handleExportPdf}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "handleExportPdf", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  async function handleExportPdf() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handleFileChange", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^              onChange={handleFileChange}$/", "language": "JavaScript", "kind": "field", "scope": "onChange", "scopeKind": "class"}, {"_type": "tag", "name": "handleFileChange", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const handleFileChange = (e) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleSubmit", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^              onClick={handleSubmit}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "handleSubmit", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  function handleSubmit() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hasSig", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^              title={hasSig ? \"Export as PDF\" : \"Upload your signature to enable export\"}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "hasSig", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^              title={hasSig ? \"Submit\" : \"Upload your signature to enable submit\"}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "hasSig", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const hasSig = useMemo(() => Boolean(sigDataUrl || objectUrlRef.current), [sigDataUrl]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "loadLocal", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^function loadLocal() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "navigate", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const navigate = useNavigate();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "objectUrlRef", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const objectUrlRef = useRef(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "reader", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^      const reader = new FileReader();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "saveLocal", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^function saveLocal(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}, {"_type": "tag", "name": "setError", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const [error, setError] = useState(\"\");$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setExportError", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const [exportError, setExportError] = useState(\"\");$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setExporting", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const [exporting, setExporting] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSaved", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const [saved, setSaved] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSigDataUrl", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const [sigDataUrl, setSigDataUrl] = useState(\"\");$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSigFileName", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^  const [sigFileName, setSigFileName] = useState(\"\");$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/edutrack-learning-platform-282005-282014/frontend_lms/src/pages/OfferLetter.jsx", "pattern": "/^      const url = URL.createObjectURL(file);$/", "language": "JavaScript", "kind": "constant"}], "hash": "15fb87c2a2e314ac23d6e7f69e2e00cc", "format-version": 4, "code-base-name": "frontend_lms", "filename": "frontend_lms/src/pages/OfferLetter.jsx", "fields": [{"name": "onClick={handleExportPdf}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onChange={handleFileChange}", "scope": "onChange", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={handleSubmit}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "title={hasSig ? \"Export as PDF\" : \"Upload your signature to enable export\"}", "scope": "title", "scopeKind": "class", "description": "unavailable"}, {"name": "title={hasSig ? \"Submit\" : \"Upload your signature to enable submit\"}", "scope": "title", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"270": "fc96e5f98ad94fdcea96258357d4f29d8004640e"}]}